# Default values for topology-builder
replicaCount: 1

image:
    repository: topology-builder
    pullPolicy: IfNotPresent
    tag: 'latest'

imagePullSecrets: []
nameOverride: ''
fullnameOverride: ''

serviceAccount:
    create: true
    annotations: {}
    name: ''

podAnnotations: {}

podSecurityContext: {}
    # fsGroup: 2000

securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

service:
    type: ClusterIP
    port: 8000
    targetPort: 8000

ingress:
    enabled: false
    className: ''
    annotations: {}
        # kubernetes.io/ingress.class: nginx
        # cert-manager.io/cluster-issuer: letsencrypt-prod
    hosts:
        - host: topology-builder.local
          paths:
              - path: /
                pathType: Prefix
    tls: []
    #  - secretName: topology-builder-tls
    #    hosts:
    #      - topology-builder.local

resources:
    limits:
        cpu: 1000m
        memory: 1Gi
    requests:
        cpu: 250m
        memory: 512Mi

autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Persistent Volume for data storage
persistence:
    enabled: false
    storageClass: ''
    accessMode: ReadWriteOnce
    size: 10Gi
    mountPath: /app/data

# Environment variables
env:
    - name: PYTHONUNBUFFERED
      value: '1'
    - name: LOG_LEVEL
      value: 'info'

# Health check configuration
livenessProbe:
    httpGet:
        path: /api/health
        port: 8000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

readinessProbe:
    httpGet:
        path: /api/health
        port: 8000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
